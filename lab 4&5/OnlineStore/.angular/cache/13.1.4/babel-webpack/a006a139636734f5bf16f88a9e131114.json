{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst http = require(\"http\");\n\nconst url = require(\"url\");\n/**\n * Super dumb and simple WebDriver client. Works with selenium standalone, may or may not work yet\n * directly with other drivers.\n */\n\n\nclass SimpleWebDriverClient {\n  constructor(seleniumAddress) {\n    this.seleniumAddress = seleniumAddress;\n  }\n  /**\n   * Send an execute script command.\n   *\n   * @param sessionId\n   * @param data A JSON blob with the script and arguments to execute.\n   */\n\n\n  execute(sessionId, data) {\n    const url = ['session', sessionId, 'execute'].join('/');\n    return this.createSeleniumRequest('POST', url, data);\n  }\n  /**\n   * Send an execute async script command.\n   *\n   * @param sessionId\n   * @param data A JSON blob with the script and arguments to execute.\n   */\n\n\n  executeAsync(sessionId, data) {\n    const url = ['session', sessionId, 'execute_async'].join('/');\n    return this.createSeleniumRequest('POST', url, data);\n  }\n  /**\n   * Get the location of an element.\n   *\n   * @param sessionId\n   * @param elementId\n   * @returns Promise<{}> A promise that resolves with the x and y coordinates of the element.\n   */\n\n\n  getLocation(sessionId, elementId) {\n    const url = ['session', sessionId, 'element', elementId, 'location'].join('/');\n    return this.createSeleniumRequest('GET', url);\n  }\n  /**\n   * Get the size of an element.\n   *\n   * @param sessionId\n   * @param elementId\n   * @returns Promise<{}> A promise that resolves with the height and width of the element.\n   */\n\n\n  getSize(sessionId, elementId) {\n    const url = ['session', sessionId, 'element', elementId, 'size'].join('/');\n    return this.createSeleniumRequest('GET', url);\n  }\n\n  createSeleniumRequest(method, messageUrl, data) {\n    let parsedUrl = url.parse(this.seleniumAddress);\n    let options = {};\n    options['method'] = method;\n    options['path'] = parsedUrl.path + '/' + messageUrl;\n    options['hostname'] = parsedUrl.hostname;\n    options['port'] = parseInt(parsedUrl.port);\n    let request = http.request(options);\n    return new Promise((resolve, reject) => {\n      if (data) {\n        request.write(data);\n      }\n\n      request.end();\n      request.on('response', resp => {\n        let respData = '';\n        resp.on('data', d => {\n          respData += d;\n        });\n        resp.on('error', err => {\n          reject(err);\n        });\n        resp.on('end', () => {\n          let response = JSON.parse(respData); // Selenium 3.5.x or greater\n\n          if (response.status && response.status > 0) {\n            console.error(`Got status ${response.status} from selenium`, response.value);\n            reject(JSON.stringify(response.value));\n          } // Selenium 3.0.x\n\n\n          if (response.state && response.state !== 'success') {\n            console.error(`Got response ${response.state} from selenium`, response.value);\n            reject(JSON.stringify(response.value));\n          }\n\n          resolve(response.value);\n        });\n      });\n    });\n  }\n\n}\n\nexports.SimpleWebDriverClient = SimpleWebDriverClient;","map":{"version":3,"sources":["/Users/dariya/Documents/GitHub/Web-development/lab 4&5/wgg87w--run/node_modules/blocking-proxy/built/lib/simple_webdriver_client.js"],"names":["Object","defineProperty","exports","value","http","require","url","SimpleWebDriverClient","constructor","seleniumAddress","execute","sessionId","data","join","createSeleniumRequest","executeAsync","getLocation","elementId","getSize","method","messageUrl","parsedUrl","parse","options","path","hostname","parseInt","port","request","Promise","resolve","reject","write","end","on","resp","respData","d","err","response","JSON","status","console","error","stringify","state"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst http = require(\"http\");\nconst url = require(\"url\");\n/**\n * Super dumb and simple WebDriver client. Works with selenium standalone, may or may not work yet\n * directly with other drivers.\n */\nclass SimpleWebDriverClient {\n    constructor(seleniumAddress) {\n        this.seleniumAddress = seleniumAddress;\n    }\n    /**\n     * Send an execute script command.\n     *\n     * @param sessionId\n     * @param data A JSON blob with the script and arguments to execute.\n     */\n    execute(sessionId, data) {\n        const url = ['session', sessionId, 'execute'].join('/');\n        return this.createSeleniumRequest('POST', url, data);\n    }\n    /**\n     * Send an execute async script command.\n     *\n     * @param sessionId\n     * @param data A JSON blob with the script and arguments to execute.\n     */\n    executeAsync(sessionId, data) {\n        const url = ['session', sessionId, 'execute_async'].join('/');\n        return this.createSeleniumRequest('POST', url, data);\n    }\n    /**\n     * Get the location of an element.\n     *\n     * @param sessionId\n     * @param elementId\n     * @returns Promise<{}> A promise that resolves with the x and y coordinates of the element.\n     */\n    getLocation(sessionId, elementId) {\n        const url = ['session', sessionId, 'element', elementId, 'location'].join('/');\n        return this.createSeleniumRequest('GET', url);\n    }\n    /**\n     * Get the size of an element.\n     *\n     * @param sessionId\n     * @param elementId\n     * @returns Promise<{}> A promise that resolves with the height and width of the element.\n     */\n    getSize(sessionId, elementId) {\n        const url = ['session', sessionId, 'element', elementId, 'size'].join('/');\n        return this.createSeleniumRequest('GET', url);\n    }\n    createSeleniumRequest(method, messageUrl, data) {\n        let parsedUrl = url.parse(this.seleniumAddress);\n        let options = {};\n        options['method'] = method;\n        options['path'] = parsedUrl.path + '/' + messageUrl;\n        options['hostname'] = parsedUrl.hostname;\n        options['port'] = parseInt(parsedUrl.port);\n        let request = http.request(options);\n        return new Promise((resolve, reject) => {\n            if (data) {\n                request.write(data);\n            }\n            request.end();\n            request.on('response', (resp) => {\n                let respData = '';\n                resp.on('data', (d) => {\n                    respData += d;\n                });\n                resp.on('error', (err) => {\n                    reject(err);\n                });\n                resp.on('end', () => {\n                    let response = JSON.parse(respData);\n                    // Selenium 3.5.x or greater\n                    if (response.status && response.status > 0) {\n                        console.error(`Got status ${response.status} from selenium`, response.value);\n                        reject(JSON.stringify(response.value));\n                    }\n                    // Selenium 3.0.x\n                    if (response.state && response.state !== 'success') {\n                        console.error(`Got response ${response.state} from selenium`, response.value);\n                        reject(JSON.stringify(response.value));\n                    }\n                    resolve(response.value);\n                });\n            });\n        });\n    }\n    ;\n}\nexports.SimpleWebDriverClient = SimpleWebDriverClient;\n"]},"metadata":{},"sourceType":"script"}