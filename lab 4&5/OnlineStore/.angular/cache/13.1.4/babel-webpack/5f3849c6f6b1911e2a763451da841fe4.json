{"ast":null,"code":"/**\n * All scripts to be run on the client via executeAsyncScript or\n * executeScript should be put here.\n *\n * NOTE: These scripts are transmitted over the wire as JavaScript text\n * constructed using their toString representation, and *cannot*\n * reference external variables.\n *\n * Some implementations seem to have issues with // comments, so use star-style\n * inside scripts.  (TODO: add issue number / example implementations\n * that caused the switch to avoid the // comments.)\n */\n// jshint browser: true\n// jshint shadow: true\n\n/* global angular */\nvar functions = {}; ///////////////////////////////////////////////////////\n////                                               ////\n////                    HELPERS                    ////\n////                                               ////\n///////////////////////////////////////////////////////\n\n/* Wraps a function up into a string with its helper functions so that it can\n * call those helper functions client side\n *\n * @param {function} fun The function to wrap up with its helpers\n * @param {...function} The helper functions.  Each function must be named\n *\n * @return {string} The string which, when executed, will invoke fun in such a\n *   way that it has access to its helper functions\n */\n\nfunction wrapWithHelpers(fun) {\n  var helpers = Array.prototype.slice.call(arguments, 1);\n\n  if (!helpers.length) {\n    return fun;\n  }\n\n  var FunClass = Function; // Get the linter to allow this eval\n\n  return new FunClass(helpers.join(';') + String.fromCharCode(59) + '  return (' + fun.toString() + ').apply(this, arguments);');\n}\n/* Tests if an ngRepeat matches a repeater\n *\n * @param {string} ngRepeat The ngRepeat to test\n * @param {string} repeater The repeater to test against\n * @param {boolean} exact If the ngRepeat expression needs to match the whole\n *   repeater (not counting any `track by ...` modifier) or if it just needs to\n *   match a substring\n * @return {boolean} If the ngRepeat matched the repeater\n */\n\n\nfunction repeaterMatch(ngRepeat, repeater, exact) {\n  if (exact) {\n    return ngRepeat.split(' track by ')[0].split(' as ')[0].split('|')[0].split('=')[0].trim() == repeater;\n  } else {\n    return ngRepeat.indexOf(repeater) != -1;\n  }\n}\n/* Tries to find $$testability and possibly $injector for an ng1 app\n *\n * By default, doesn't care about $injector if it finds $$testability.  However,\n * these priorities can be reversed.\n *\n * @param {string=} selector The selector for the element with the injector.  If\n *   falsy, tries a variety of methods to find an injector\n * @param {boolean=} injectorPlease Prioritize finding an injector\n * @return {$$testability?: Testability, $injector?: Injector} Returns whatever\n *   ng1 app hooks it finds\n */\n\n\nfunction getNg1Hooks(selector, injectorPlease) {\n  function tryEl(el) {\n    try {\n      if (!injectorPlease && angular.getTestability) {\n        var $$testability = angular.getTestability(el);\n\n        if ($$testability) {\n          return {\n            $$testability: $$testability\n          };\n        }\n      } else {\n        var $injector = angular.element(el).injector();\n\n        if ($injector) {\n          return {\n            $injector: $injector\n          };\n        }\n      }\n    } catch (err) {}\n  }\n\n  function trySelector(selector) {\n    var els = document.querySelectorAll(selector);\n\n    for (var i = 0; i < els.length; i++) {\n      var elHooks = tryEl(els[i]);\n\n      if (elHooks) {\n        return elHooks;\n      }\n    }\n  }\n\n  if (selector) {\n    return trySelector(selector);\n  } else if (window.__TESTABILITY__NG1_APP_ROOT_INJECTOR__) {\n    var $injector = window.__TESTABILITY__NG1_APP_ROOT_INJECTOR__;\n    var $$testability = null;\n\n    try {\n      $$testability = $injector.get('$$testability');\n    } catch (e) {}\n\n    return {\n      $injector: $injector,\n      $$testability: $$testability\n    };\n  } else {\n    return tryEl(document.body) || trySelector('[ng-app]') || trySelector('[ng\\\\:app]') || trySelector('[ng-controller]') || trySelector('[ng\\\\:controller]');\n  }\n} ///////////////////////////////////////////////////////\n////                                               ////\n////                    SCRIPTS                    ////\n////                                               ////\n///////////////////////////////////////////////////////\n\n/**\n * Wait until Angular has finished rendering and has\n * no outstanding $http calls before continuing. The specific Angular app\n * is determined by the rootSelector.\n *\n * Asynchronous.\n *\n * @param {string} rootSelector The selector housing an ng-app\n * @param {function(string)} callback callback. If a failure occurs, it will\n *     be passed as a parameter.\n */\n\n\nfunctions.waitForAngular = function (rootSelector, callback) {\n  try {\n    // Wait for both angular1 testability and angular2 testability.\n    var testCallback = callback; // Wait for angular1 testability first and run waitForAngular2 as a callback\n\n    var waitForAngular1 = function (callback) {\n      if (window.angular) {\n        var hooks = getNg1Hooks(rootSelector);\n\n        if (!hooks) {\n          callback(); // not an angular1 app\n        } else {\n          if (hooks.$$testability) {\n            hooks.$$testability.whenStable(callback);\n          } else if (hooks.$injector) {\n            hooks.$injector.get('$browser').notifyWhenNoOutstandingRequests(callback);\n          } else if (!rootSelector) {\n            throw new Error('Could not automatically find injector on page: \"' + window.location.toString() + '\".  Consider using config.rootEl');\n          } else {\n            throw new Error('root element (' + rootSelector + ') has no injector.' + ' this may mean it is not inside ng-app.');\n          }\n        }\n      } else {\n        callback();\n      } // not an angular1 app\n\n    }; // Wait for Angular2 testability and then run test callback\n\n\n    var waitForAngular2 = function () {\n      if (window.getAngularTestability) {\n        if (rootSelector) {\n          var testability = null;\n          var el = document.querySelector(rootSelector);\n\n          try {\n            testability = window.getAngularTestability(el);\n          } catch (e) {}\n\n          if (testability) {\n            testability.whenStable(testCallback);\n            return;\n          }\n        } // Didn't specify root element or testability could not be found\n        // by rootSelector. This may happen in a hybrid app, which could have\n        // more than one root.\n\n\n        var testabilities = window.getAllAngularTestabilities();\n        var count = testabilities.length; // No angular2 testability, this happens when\n        // going to a hybrid page and going back to a pure angular1 page\n\n        if (count === 0) {\n          testCallback();\n          return;\n        }\n\n        var decrement = function () {\n          count--;\n\n          if (count === 0) {\n            testCallback();\n          }\n        };\n\n        testabilities.forEach(function (testability) {\n          testability.whenStable(decrement);\n        });\n      } else {\n        testCallback();\n      } // not an angular2 app\n\n    };\n\n    if (!window.angular && !window.getAngularTestability) {\n      // no testability hook\n      throw new Error('both angularJS testability and angular testability are undefined.' + '  This could be either ' + 'because this is a non-angular page or because your test involves ' + 'client-side navigation, which can interfere with Protractor\\'s ' + 'bootstrapping.  See http://git.io/v4gXM for details');\n    } else {\n      waitForAngular1(waitForAngular2);\n    } // Wait for angular1 and angular2\n    // Testability hooks sequentially\n\n  } catch (err) {\n    callback(err.message);\n  }\n};\n/**\n * Find a list of elements in the page by their angular binding.\n *\n * @param {string} binding The binding, e.g. {{cat.name}}.\n * @param {boolean} exactMatch Whether the binding needs to be matched exactly\n * @param {Element} using The scope of the search.\n * @param {string} rootSelector The selector to use for the root app element.\n *\n * @return {Array.<Element>} The elements containing the binding.\n */\n\n\nfunctions.findBindings = function (binding, exactMatch, using, rootSelector) {\n  using = using || document;\n\n  if (angular.getTestability) {\n    return getNg1Hooks(rootSelector).$$testability.findBindings(using, binding, exactMatch);\n  }\n\n  var bindings = using.getElementsByClassName('ng-binding');\n  var matches = [];\n\n  for (var i = 0; i < bindings.length; ++i) {\n    var dataBinding = angular.element(bindings[i]).data('$binding');\n\n    if (dataBinding) {\n      var bindingName = dataBinding.exp || dataBinding[0].exp || dataBinding;\n\n      if (exactMatch) {\n        var matcher = new RegExp('({|\\\\s|^|\\\\|)' +\n        /* See http://stackoverflow.com/q/3561711 */\n        binding.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&') + '(}|\\\\s|$|\\\\|)');\n\n        if (matcher.test(bindingName)) {\n          matches.push(bindings[i]);\n        }\n      } else {\n        if (bindingName.indexOf(binding) != -1) {\n          matches.push(bindings[i]);\n        }\n      }\n    }\n  }\n\n  return matches;\n  /* Return the whole array for webdriver.findElements. */\n};\n/**\n * Find an array of elements matching a row within an ng-repeat.\n * Always returns an array of only one element for plain old ng-repeat.\n * Returns an array of all the elements in one segment for ng-repeat-start.\n *\n * @param {string} repeater The text of the repeater, e.g. 'cat in cats'.\n * @param {boolean} exact Whether the repeater needs to be matched exactly\n * @param {number} index The row index.\n * @param {Element} using The scope of the search.\n *\n * @return {Array.<Element>} The row of the repeater, or an array of elements\n *     in the first row in the case of ng-repeat-start.\n */\n\n\nfunction findRepeaterRows(repeater, exact, index, using) {\n  using = using || document;\n  var prefixes = ['ng-', 'ng_', 'data-ng-', 'x-ng-', 'ng\\\\:'];\n  var rows = [];\n\n  for (var p = 0; p < prefixes.length; ++p) {\n    var attr = prefixes[p] + 'repeat';\n    var repeatElems = using.querySelectorAll('[' + attr + ']');\n    attr = attr.replace(/\\\\/g, '');\n\n    for (var i = 0; i < repeatElems.length; ++i) {\n      if (repeaterMatch(repeatElems[i].getAttribute(attr), repeater, exact)) {\n        rows.push(repeatElems[i]);\n      }\n    }\n  }\n  /* multiRows is an array of arrays, where each inner array contains\n     one row of elements. */\n\n\n  var multiRows = [];\n\n  for (var p = 0; p < prefixes.length; ++p) {\n    var attr = prefixes[p] + 'repeat-start';\n    var repeatElems = using.querySelectorAll('[' + attr + ']');\n    attr = attr.replace(/\\\\/g, '');\n\n    for (var i = 0; i < repeatElems.length; ++i) {\n      if (repeaterMatch(repeatElems[i].getAttribute(attr), repeater, exact)) {\n        var elem = repeatElems[i];\n        var row = [];\n\n        while (elem.nodeType != 8 || !repeaterMatch(elem.nodeValue, repeater)) {\n          if (elem.nodeType == 1) {\n            row.push(elem);\n          }\n\n          elem = elem.nextSibling;\n        }\n\n        multiRows.push(row);\n      }\n    }\n  }\n\n  var row = rows[index] || [],\n      multiRow = multiRows[index] || [];\n  return [].concat(row, multiRow);\n}\n\nfunctions.findRepeaterRows = wrapWithHelpers(findRepeaterRows, repeaterMatch);\n/**\n* Find all rows of an ng-repeat.\n*\n* @param {string} repeater The text of the repeater, e.g. 'cat in cats'.\n* @param {boolean} exact Whether the repeater needs to be matched exactly\n* @param {Element} using The scope of the search.\n*\n* @return {Array.<Element>} All rows of the repeater.\n*/\n\nfunction findAllRepeaterRows(repeater, exact, using) {\n  using = using || document;\n  var rows = [];\n  var prefixes = ['ng-', 'ng_', 'data-ng-', 'x-ng-', 'ng\\\\:'];\n\n  for (var p = 0; p < prefixes.length; ++p) {\n    var attr = prefixes[p] + 'repeat';\n    var repeatElems = using.querySelectorAll('[' + attr + ']');\n    attr = attr.replace(/\\\\/g, '');\n\n    for (var i = 0; i < repeatElems.length; ++i) {\n      if (repeaterMatch(repeatElems[i].getAttribute(attr), repeater, exact)) {\n        rows.push(repeatElems[i]);\n      }\n    }\n  }\n\n  for (var p = 0; p < prefixes.length; ++p) {\n    var attr = prefixes[p] + 'repeat-start';\n    var repeatElems = using.querySelectorAll('[' + attr + ']');\n    attr = attr.replace(/\\\\/g, '');\n\n    for (var i = 0; i < repeatElems.length; ++i) {\n      if (repeaterMatch(repeatElems[i].getAttribute(attr), repeater, exact)) {\n        var elem = repeatElems[i];\n\n        while (elem.nodeType != 8 || !repeaterMatch(elem.nodeValue, repeater)) {\n          if (elem.nodeType == 1) {\n            rows.push(elem);\n          }\n\n          elem = elem.nextSibling;\n        }\n      }\n    }\n  }\n\n  return rows;\n}\n\nfunctions.findAllRepeaterRows = wrapWithHelpers(findAllRepeaterRows, repeaterMatch);\n/**\n * Find an element within an ng-repeat by its row and column.\n *\n * @param {string} repeater The text of the repeater, e.g. 'cat in cats'.\n * @param {boolean} exact Whether the repeater needs to be matched exactly\n * @param {number} index The row index.\n * @param {string} binding The column binding, e.g. '{{cat.name}}'.\n * @param {Element} using The scope of the search.\n * @param {string} rootSelector The selector to use for the root app element.\n *\n * @return {Array.<Element>} The element in an array.\n */\n\nfunction findRepeaterElement(repeater, exact, index, binding, using, rootSelector) {\n  var matches = [];\n  using = using || document;\n  var rows = [];\n  var prefixes = ['ng-', 'ng_', 'data-ng-', 'x-ng-', 'ng\\\\:'];\n\n  for (var p = 0; p < prefixes.length; ++p) {\n    var attr = prefixes[p] + 'repeat';\n    var repeatElems = using.querySelectorAll('[' + attr + ']');\n    attr = attr.replace(/\\\\/g, '');\n\n    for (var i = 0; i < repeatElems.length; ++i) {\n      if (repeaterMatch(repeatElems[i].getAttribute(attr), repeater, exact)) {\n        rows.push(repeatElems[i]);\n      }\n    }\n  }\n  /* multiRows is an array of arrays, where each inner array contains\n     one row of elements. */\n\n\n  var multiRows = [];\n\n  for (var p = 0; p < prefixes.length; ++p) {\n    var attr = prefixes[p] + 'repeat-start';\n    var repeatElems = using.querySelectorAll('[' + attr + ']');\n    attr = attr.replace(/\\\\/g, '');\n\n    for (var i = 0; i < repeatElems.length; ++i) {\n      if (repeaterMatch(repeatElems[i].getAttribute(attr), repeater, exact)) {\n        var elem = repeatElems[i];\n        var row = [];\n\n        while (elem.nodeType != 8 || elem.nodeValue && !repeaterMatch(elem.nodeValue, repeater)) {\n          if (elem.nodeType == 1) {\n            row.push(elem);\n          }\n\n          elem = elem.nextSibling;\n        }\n\n        multiRows.push(row);\n      }\n    }\n  }\n\n  var row = rows[index];\n  var multiRow = multiRows[index];\n  var bindings = [];\n\n  if (row) {\n    if (angular.getTestability) {\n      matches.push.apply(matches, getNg1Hooks(rootSelector).$$testability.findBindings(row, binding));\n    } else {\n      if (row.className.indexOf('ng-binding') != -1) {\n        bindings.push(row);\n      }\n\n      var childBindings = row.getElementsByClassName('ng-binding');\n\n      for (var i = 0; i < childBindings.length; ++i) {\n        bindings.push(childBindings[i]);\n      }\n    }\n  }\n\n  if (multiRow) {\n    for (var i = 0; i < multiRow.length; ++i) {\n      var rowElem = multiRow[i];\n\n      if (angular.getTestability) {\n        matches.push.apply(matches, getNg1Hooks(rootSelector).$$testability.findBindings(rowElem, binding));\n      } else {\n        if (rowElem.className.indexOf('ng-binding') != -1) {\n          bindings.push(rowElem);\n        }\n\n        var childBindings = rowElem.getElementsByClassName('ng-binding');\n\n        for (var j = 0; j < childBindings.length; ++j) {\n          bindings.push(childBindings[j]);\n        }\n      }\n    }\n  }\n\n  for (var i = 0; i < bindings.length; ++i) {\n    var dataBinding = angular.element(bindings[i]).data('$binding');\n\n    if (dataBinding) {\n      var bindingName = dataBinding.exp || dataBinding[0].exp || dataBinding;\n\n      if (bindingName.indexOf(binding) != -1) {\n        matches.push(bindings[i]);\n      }\n    }\n  }\n\n  return matches;\n}\n\nfunctions.findRepeaterElement = wrapWithHelpers(findRepeaterElement, repeaterMatch, getNg1Hooks);\n/**\n * Find the elements in a column of an ng-repeat.\n *\n * @param {string} repeater The text of the repeater, e.g. 'cat in cats'.\n * @param {boolean} exact Whether the repeater needs to be matched exactly\n * @param {string} binding The column binding, e.g. '{{cat.name}}'.\n * @param {Element} using The scope of the search.\n * @param {string} rootSelector The selector to use for the root app element.\n *\n * @return {Array.<Element>} The elements in the column.\n */\n\nfunction findRepeaterColumn(repeater, exact, binding, using, rootSelector) {\n  var matches = [];\n  using = using || document;\n  var rows = [];\n  var prefixes = ['ng-', 'ng_', 'data-ng-', 'x-ng-', 'ng\\\\:'];\n\n  for (var p = 0; p < prefixes.length; ++p) {\n    var attr = prefixes[p] + 'repeat';\n    var repeatElems = using.querySelectorAll('[' + attr + ']');\n    attr = attr.replace(/\\\\/g, '');\n\n    for (var i = 0; i < repeatElems.length; ++i) {\n      if (repeaterMatch(repeatElems[i].getAttribute(attr), repeater, exact)) {\n        rows.push(repeatElems[i]);\n      }\n    }\n  }\n  /* multiRows is an array of arrays, where each inner array contains\n     one row of elements. */\n\n\n  var multiRows = [];\n\n  for (var p = 0; p < prefixes.length; ++p) {\n    var attr = prefixes[p] + 'repeat-start';\n    var repeatElems = using.querySelectorAll('[' + attr + ']');\n    attr = attr.replace(/\\\\/g, '');\n\n    for (var i = 0; i < repeatElems.length; ++i) {\n      if (repeaterMatch(repeatElems[i].getAttribute(attr), repeater, exact)) {\n        var elem = repeatElems[i];\n        var row = [];\n\n        while (elem.nodeType != 8 || elem.nodeValue && !repeaterMatch(elem.nodeValue, repeater)) {\n          if (elem.nodeType == 1) {\n            row.push(elem);\n          }\n\n          elem = elem.nextSibling;\n        }\n\n        multiRows.push(row);\n      }\n    }\n  }\n\n  var bindings = [];\n\n  for (var i = 0; i < rows.length; ++i) {\n    if (angular.getTestability) {\n      matches.push.apply(matches, getNg1Hooks(rootSelector).$$testability.findBindings(rows[i], binding));\n    } else {\n      if (rows[i].className.indexOf('ng-binding') != -1) {\n        bindings.push(rows[i]);\n      }\n\n      var childBindings = rows[i].getElementsByClassName('ng-binding');\n\n      for (var k = 0; k < childBindings.length; ++k) {\n        bindings.push(childBindings[k]);\n      }\n    }\n  }\n\n  for (var i = 0; i < multiRows.length; ++i) {\n    for (var j = 0; j < multiRows[i].length; ++j) {\n      if (angular.getTestability) {\n        matches.push.apply(matches, getNg1Hooks(rootSelector).$$testability.findBindings(multiRows[i][j], binding));\n      } else {\n        var elem = multiRows[i][j];\n\n        if (elem.className.indexOf('ng-binding') != -1) {\n          bindings.push(elem);\n        }\n\n        var childBindings = elem.getElementsByClassName('ng-binding');\n\n        for (var k = 0; k < childBindings.length; ++k) {\n          bindings.push(childBindings[k]);\n        }\n      }\n    }\n  }\n\n  for (var j = 0; j < bindings.length; ++j) {\n    var dataBinding = angular.element(bindings[j]).data('$binding');\n\n    if (dataBinding) {\n      var bindingName = dataBinding.exp || dataBinding[0].exp || dataBinding;\n\n      if (bindingName.indexOf(binding) != -1) {\n        matches.push(bindings[j]);\n      }\n    }\n  }\n\n  return matches;\n}\n\nfunctions.findRepeaterColumn = wrapWithHelpers(findRepeaterColumn, repeaterMatch, getNg1Hooks);\n/**\n * Find elements by model name.\n *\n * @param {string} model The model name.\n * @param {Element} using The scope of the search.\n * @param {string} rootSelector The selector to use for the root app element.\n *\n * @return {Array.<Element>} The matching elements.\n */\n\nfunctions.findByModel = function (model, using, rootSelector) {\n  using = using || document;\n\n  if (angular.getTestability) {\n    return getNg1Hooks(rootSelector).$$testability.findModels(using, model, true);\n  }\n\n  var prefixes = ['ng-', 'ng_', 'data-ng-', 'x-ng-', 'ng\\\\:'];\n\n  for (var p = 0; p < prefixes.length; ++p) {\n    var selector = '[' + prefixes[p] + 'model=\"' + model + '\"]';\n    var elements = using.querySelectorAll(selector);\n\n    if (elements.length) {\n      return elements;\n    }\n  }\n};\n/**\n * Find elements by options.\n *\n * @param {string} optionsDescriptor The descriptor for the option\n *     (i.e. fruit for fruit in fruits).\n * @param {Element} using The scope of the search.\n *\n * @return {Array.<Element>} The matching elements.\n */\n\n\nfunctions.findByOptions = function (optionsDescriptor, using) {\n  using = using || document;\n  var prefixes = ['ng-', 'ng_', 'data-ng-', 'x-ng-', 'ng\\\\:'];\n\n  for (var p = 0; p < prefixes.length; ++p) {\n    var selector = '[' + prefixes[p] + 'options=\"' + optionsDescriptor + '\"] option';\n    var elements = using.querySelectorAll(selector);\n\n    if (elements.length) {\n      return elements;\n    }\n  }\n};\n/**\n * Find buttons by textual content.\n *\n * @param {string} searchText The exact text to match.\n * @param {Element} using The scope of the search.\n *\n * @return {Array.<Element>} The matching elements.\n */\n\n\nfunctions.findByButtonText = function (searchText, using) {\n  using = using || document;\n  var elements = using.querySelectorAll('button, input[type=\"button\"], input[type=\"submit\"]');\n  var matches = [];\n\n  for (var i = 0; i < elements.length; ++i) {\n    var element = elements[i];\n    var elementText;\n\n    if (element.tagName.toLowerCase() == 'button') {\n      elementText = element.textContent || element.innerText || '';\n    } else {\n      elementText = element.value;\n    }\n\n    if (elementText.trim() === searchText) {\n      matches.push(element);\n    }\n  }\n\n  return matches;\n};\n/**\n * Find buttons by textual content.\n *\n * @param {string} searchText The exact text to match.\n * @param {Element} using The scope of the search.\n *\n * @return {Array.<Element>} The matching elements.\n */\n\n\nfunctions.findByPartialButtonText = function (searchText, using) {\n  using = using || document;\n  var elements = using.querySelectorAll('button, input[type=\"button\"], input[type=\"submit\"]');\n  var matches = [];\n\n  for (var i = 0; i < elements.length; ++i) {\n    var element = elements[i];\n    var elementText;\n\n    if (element.tagName.toLowerCase() == 'button') {\n      elementText = element.textContent || element.innerText || '';\n    } else {\n      elementText = element.value;\n    }\n\n    if (elementText.indexOf(searchText) > -1) {\n      matches.push(element);\n    }\n  }\n\n  return matches;\n};\n/**\n * Find elements by css selector and textual content.\n *\n * @param {string} cssSelector The css selector to match.\n * @param {string} searchText The exact text to match or a serialized regex.\n * @param {Element} using The scope of the search.\n *\n * @return {Array.<Element>} An array of matching elements.\n */\n\n\nfunctions.findByCssContainingText = function (cssSelector, searchText, using) {\n  using = using || document;\n\n  if (searchText.indexOf('__REGEXP__') === 0) {\n    var match = searchText.split('__REGEXP__')[1].match(/\\/(.*)\\/(.*)?/);\n    searchText = new RegExp(match[1], match[2] || '');\n  }\n\n  var elements = using.querySelectorAll(cssSelector);\n  var matches = [];\n\n  for (var i = 0; i < elements.length; ++i) {\n    var element = elements[i];\n    var elementText = element.textContent || element.innerText || '';\n    var elementMatches = searchText instanceof RegExp ? searchText.test(elementText) : elementText.indexOf(searchText) > -1;\n\n    if (elementMatches) {\n      matches.push(element);\n    }\n  }\n\n  return matches;\n};\n/**\n * Tests whether the angular global variable is present on a page. Retries\n * in case the page is just loading slowly.\n *\n * Asynchronous.\n *\n * @param {number} attempts Number of times to retry.\n * @param {boolean} ng12Hybrid Flag set if app is a hybrid of angular 1 and 2\n * @param {function({version: ?number, message: ?string})} asyncCallback callback\n *\n */\n\n\nfunctions.testForAngular = function (attempts, ng12Hybrid, asyncCallback) {\n  var callback = function (args) {\n    setTimeout(function () {\n      asyncCallback(args);\n    }, 0);\n  };\n\n  var definitelyNg1 = !!ng12Hybrid;\n  var definitelyNg2OrNewer = false;\n\n  var check = function (n) {\n    try {\n      /* Figure out which version of angular we're waiting on */\n      if (!definitelyNg1 && !definitelyNg2OrNewer) {\n        if (window.angular && !(window.angular.version && window.angular.version.major > 1)) {\n          definitelyNg1 = true;\n        } else if (window.getAllAngularTestabilities) {\n          definitelyNg2OrNewer = true;\n        }\n      }\n      /* See if our version of angular is ready */\n\n\n      if (definitelyNg1) {\n        if (window.angular && window.angular.resumeBootstrap) {\n          return callback({\n            ver: 1\n          });\n        }\n      } else if (definitelyNg2OrNewer) {\n        if (true\n        /* ng2 has no resumeBootstrap() */\n        ) {\n          return callback({\n            ver: 2\n          });\n        }\n      }\n      /* Try again (or fail) */\n\n\n      if (n < 1) {\n        if (definitelyNg1 && window.angular) {\n          callback({\n            message: 'angular never provided resumeBootstrap'\n          });\n        } else if (ng12Hybrid && !window.angular) {\n          callback({\n            message: 'angular 1 never loaded' + window.getAllAngularTestabilities ? ' (are you sure this app ' + 'uses ngUpgrade?  Try un-setting ng12Hybrid)' : ''\n          });\n        } else {\n          callback({\n            message: 'retries looking for angular exceeded'\n          });\n        }\n      } else {\n        window.setTimeout(function () {\n          check(n - 1);\n        }, 1000);\n      }\n    } catch (e) {\n      callback({\n        message: e\n      });\n    }\n  };\n\n  check(attempts);\n};\n/**\n * Evalute an Angular expression in the context of a given element.\n *\n * @param {Element} element The element in whose scope to evaluate.\n * @param {string} expression The expression to evaluate.\n *\n * @return {?Object} The result of the evaluation.\n */\n\n\nfunctions.evaluate = function (element, expression) {\n  return angular.element(element).scope().$eval(expression);\n};\n\nfunctions.allowAnimations = function (element, value) {\n  var ngElement = angular.element(element);\n\n  if (ngElement.allowAnimations) {\n    // AngularDart: $testability API.\n    return ngElement.allowAnimations(value);\n  } else {\n    // AngularJS\n    var enabledFn = ngElement.injector().get('$animate').enabled;\n    return value == null ? enabledFn() : enabledFn(value);\n  }\n};\n/**\n * Return the current url using $location.absUrl().\n *\n * @param {string} selector The selector housing an ng-app\n */\n\n\nfunctions.getLocationAbsUrl = function (selector) {\n  var hooks = getNg1Hooks(selector);\n\n  if (angular.getTestability) {\n    return hooks.$$testability.getLocation();\n  }\n\n  return hooks.$injector.get('$location').absUrl();\n};\n/**\n * Browse to another page using in-page navigation.\n *\n * @param {string} selector The selector housing an ng-app\n * @param {string} url In page URL using the same syntax as $location.url(),\n *     /path?search=a&b=c#hash\n */\n\n\nfunctions.setLocation = function (selector, url) {\n  var hooks = getNg1Hooks(selector);\n\n  if (angular.getTestability) {\n    return hooks.$$testability.setLocation(url);\n  }\n\n  var $injector = hooks.$injector;\n  var $location = $injector.get('$location');\n  var $rootScope = $injector.get('$rootScope');\n\n  if (url !== $location.url()) {\n    $location.url(url);\n    $rootScope.$digest();\n  }\n};\n/**\n * Retrieve the pending $http requests.\n *\n * @param {string} selector The selector housing an ng-app\n * @return {!Array<!Object>} An array of pending http requests.\n */\n\n\nfunctions.getPendingHttpRequests = function (selector) {\n  var hooks = getNg1Hooks(selector, true);\n  var $http = hooks.$injector.get('$http');\n  return $http.pendingRequests;\n};\n\n['waitForAngular', 'findBindings', 'findByModel', 'getLocationAbsUrl', 'setLocation', 'getPendingHttpRequests'].forEach(function (funName) {\n  functions[funName] = wrapWithHelpers(functions[funName], getNg1Hooks);\n});\n/* Publish all the functions as strings to pass to WebDriver's\n * exec[Async]Script.  In addition, also include a script that will\n * install all the functions on window (for debugging.)\n *\n * We also wrap any exceptions thrown by a clientSideScripts function\n * that is not an instance of the Error type into an Error type.  If we\n * don't do so, then the resulting stack trace is completely unhelpful\n * and the exception message is just \"unknown error.\"  These types of\n * exceptions are the common case for dart2js code.  This wrapping gives\n * us the Dart stack trace and exception message.\n */\n\nvar util = require('util');\n\nvar scriptsList = [];\nvar scriptFmt = 'try { return (%s).apply(this, arguments); }\\n' + 'catch(e) { throw (e instanceof Error) ? e : new Error(e); }';\n\nfor (var fnName in functions) {\n  if (functions.hasOwnProperty(fnName)) {\n    exports[fnName] = util.format(scriptFmt, functions[fnName]);\n    scriptsList.push(util.format('%s: %s', fnName, functions[fnName]));\n  }\n}\n\nexports.installInBrowser = util.format('window.clientSideScripts = {%s};', scriptsList.join(', '));\n/**\n * Automatically installed by Protractor when a page is loaded, this\n * default mock module decorates $timeout to keep track of any\n * outstanding timeouts.\n *\n * @param {boolean} trackOutstandingTimeouts\n */\n\nexports.protractorBaseModuleFn = function (trackOutstandingTimeouts) {\n  var ngMod = angular.module('protractorBaseModule_', []).config(['$compileProvider', function ($compileProvider) {\n    if ($compileProvider.debugInfoEnabled) {\n      $compileProvider.debugInfoEnabled(true);\n    }\n  }]);\n\n  if (trackOutstandingTimeouts) {\n    ngMod.config(['$provide', function ($provide) {\n      $provide.decorator('$timeout', ['$delegate', function ($delegate) {\n        var $timeout = $delegate;\n        var taskId = 0;\n\n        if (!window['NG_PENDING_TIMEOUTS']) {\n          window['NG_PENDING_TIMEOUTS'] = {};\n        }\n\n        var extendedTimeout = function () {\n          var args = Array.prototype.slice.call(arguments);\n\n          if (typeof args[0] !== 'function') {\n            return $timeout.apply(null, args);\n          }\n\n          taskId++;\n          var fn = args[0];\n          window['NG_PENDING_TIMEOUTS'][taskId] = fn.toString();\n\n          var wrappedFn = function (taskId_) {\n            return function () {\n              delete window['NG_PENDING_TIMEOUTS'][taskId_];\n              return fn.apply(null, arguments);\n            };\n          }(taskId);\n\n          args[0] = wrappedFn;\n          var promise = $timeout.apply(null, args);\n          promise.ptorTaskId_ = taskId;\n          return promise;\n        };\n\n        extendedTimeout.cancel = function () {\n          var taskId_ = arguments[0] && arguments[0].ptorTaskId_;\n\n          if (taskId_) {\n            delete window['NG_PENDING_TIMEOUTS'][taskId_];\n          }\n\n          return $timeout.cancel.apply($timeout, arguments);\n        };\n\n        return extendedTimeout;\n      }]);\n    }]);\n  }\n};","map":{"version":3,"sources":["/Users/dariya/Documents/GitHub/Web-development/lab 4&5/wgg87w--run/node_modules/protractor/built/clientsidescripts.js"],"names":["functions","wrapWithHelpers","fun","helpers","Array","prototype","slice","call","arguments","length","FunClass","Function","join","String","fromCharCode","toString","repeaterMatch","ngRepeat","repeater","exact","split","trim","indexOf","getNg1Hooks","selector","injectorPlease","tryEl","el","angular","getTestability","$$testability","$injector","element","injector","err","trySelector","els","document","querySelectorAll","i","elHooks","window","__TESTABILITY__NG1_APP_ROOT_INJECTOR__","get","e","body","waitForAngular","rootSelector","callback","testCallback","waitForAngular1","hooks","whenStable","notifyWhenNoOutstandingRequests","Error","location","waitForAngular2","getAngularTestability","testability","querySelector","testabilities","getAllAngularTestabilities","count","decrement","forEach","message","findBindings","binding","exactMatch","using","bindings","getElementsByClassName","matches","dataBinding","data","bindingName","exp","matcher","RegExp","replace","test","push","findRepeaterRows","index","prefixes","rows","p","attr","repeatElems","getAttribute","multiRows","elem","row","nodeType","nodeValue","nextSibling","multiRow","concat","findAllRepeaterRows","findRepeaterElement","apply","className","childBindings","rowElem","j","findRepeaterColumn","k","findByModel","model","findModels","elements","findByOptions","optionsDescriptor","findByButtonText","searchText","elementText","tagName","toLowerCase","textContent","innerText","value","findByPartialButtonText","findByCssContainingText","cssSelector","match","elementMatches","testForAngular","attempts","ng12Hybrid","asyncCallback","args","setTimeout","definitelyNg1","definitelyNg2OrNewer","check","n","version","major","resumeBootstrap","ver","evaluate","expression","scope","$eval","allowAnimations","ngElement","enabledFn","enabled","getLocationAbsUrl","getLocation","absUrl","setLocation","url","$location","$rootScope","$digest","getPendingHttpRequests","$http","pendingRequests","funName","util","require","scriptsList","scriptFmt","fnName","hasOwnProperty","exports","format","installInBrowser","protractorBaseModuleFn","trackOutstandingTimeouts","ngMod","module","config","$compileProvider","debugInfoEnabled","$provide","decorator","$delegate","$timeout","taskId","extendedTimeout","fn","wrappedFn","taskId_","promise","ptorTaskId_","cancel"],"mappings":"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","sourcesContent":["/**\n * All scripts to be run on the client via executeAsyncScript or\n * executeScript should be put here.\n *\n * NOTE: These scripts are transmitted over the wire as JavaScript text\n * constructed using their toString representation, and *cannot*\n * reference external variables.\n *\n * Some implementations seem to have issues with // comments, so use star-style\n * inside scripts.  (TODO: add issue number / example implementations\n * that caused the switch to avoid the // comments.)\n */\n\n// jshint browser: true\n// jshint shadow: true\n/* global angular */\nvar functions = {};\n\n///////////////////////////////////////////////////////\n////                                               ////\n////                    HELPERS                    ////\n////                                               ////\n///////////////////////////////////////////////////////\n\n\n/* Wraps a function up into a string with its helper functions so that it can\n * call those helper functions client side\n *\n * @param {function} fun The function to wrap up with its helpers\n * @param {...function} The helper functions.  Each function must be named\n *\n * @return {string} The string which, when executed, will invoke fun in such a\n *   way that it has access to its helper functions\n */\nfunction wrapWithHelpers(fun) {\n  var helpers = Array.prototype.slice.call(arguments, 1);\n  if (!helpers.length) {\n    return fun;\n  }\n  var FunClass = Function; // Get the linter to allow this eval\n  return new FunClass(\n      helpers.join(';') + String.fromCharCode(59) +\n      '  return (' + fun.toString() + ').apply(this, arguments);');\n}\n\n/* Tests if an ngRepeat matches a repeater\n *\n * @param {string} ngRepeat The ngRepeat to test\n * @param {string} repeater The repeater to test against\n * @param {boolean} exact If the ngRepeat expression needs to match the whole\n *   repeater (not counting any `track by ...` modifier) or if it just needs to\n *   match a substring\n * @return {boolean} If the ngRepeat matched the repeater\n */\nfunction repeaterMatch(ngRepeat, repeater, exact) {\n  if (exact) {\n    return ngRepeat.split(' track by ')[0].split(' as ')[0].split('|')[0].\n        split('=')[0].trim() == repeater;\n  } else {\n    return ngRepeat.indexOf(repeater) != -1;\n  }\n}\n\n/* Tries to find $$testability and possibly $injector for an ng1 app\n *\n * By default, doesn't care about $injector if it finds $$testability.  However,\n * these priorities can be reversed.\n *\n * @param {string=} selector The selector for the element with the injector.  If\n *   falsy, tries a variety of methods to find an injector\n * @param {boolean=} injectorPlease Prioritize finding an injector\n * @return {$$testability?: Testability, $injector?: Injector} Returns whatever\n *   ng1 app hooks it finds\n */\nfunction getNg1Hooks(selector, injectorPlease) {\n  function tryEl(el) {\n    try {\n      if (!injectorPlease && angular.getTestability) {\n        var $$testability = angular.getTestability(el);\n        if ($$testability) {\n          return {$$testability: $$testability};\n        }\n      } else {\n        var $injector = angular.element(el).injector();\n        if ($injector) {\n          return {$injector: $injector};\n        }\n      }\n    } catch(err) {}\n  }\n  function trySelector(selector) {\n    var els = document.querySelectorAll(selector);\n    for (var i = 0; i < els.length; i++) {\n      var elHooks = tryEl(els[i]);\n      if (elHooks) {\n        return elHooks;\n      }\n    }\n  }\n\n  if (selector) {\n    return trySelector(selector);\n  } else if (window.__TESTABILITY__NG1_APP_ROOT_INJECTOR__) {\n    var $injector = window.__TESTABILITY__NG1_APP_ROOT_INJECTOR__;\n    var $$testability = null;\n    try {\n      $$testability = $injector.get('$$testability');\n    } catch (e) {}\n    return {$injector: $injector, $$testability: $$testability};\n  } else {\n    return tryEl(document.body) ||\n        trySelector('[ng-app]') || trySelector('[ng\\\\:app]') ||\n        trySelector('[ng-controller]') || trySelector('[ng\\\\:controller]');\n  }\n}\n\n///////////////////////////////////////////////////////\n////                                               ////\n////                    SCRIPTS                    ////\n////                                               ////\n///////////////////////////////////////////////////////\n\n\n/**\n * Wait until Angular has finished rendering and has\n * no outstanding $http calls before continuing. The specific Angular app\n * is determined by the rootSelector.\n *\n * Asynchronous.\n *\n * @param {string} rootSelector The selector housing an ng-app\n * @param {function(string)} callback callback. If a failure occurs, it will\n *     be passed as a parameter.\n */\nfunctions.waitForAngular = function(rootSelector, callback) {\n\n  try {\n    // Wait for both angular1 testability and angular2 testability.\n\n    var testCallback = callback;\n\n    // Wait for angular1 testability first and run waitForAngular2 as a callback\n    var waitForAngular1 = function(callback) {\n\n      if (window.angular) {\n        var hooks = getNg1Hooks(rootSelector);\n        if (!hooks){\n          callback();  // not an angular1 app\n        }\n        else{\n          if (hooks.$$testability) {\n            hooks.$$testability.whenStable(callback);\n          } else if (hooks.$injector) {\n            hooks.$injector.get('$browser')\n                .notifyWhenNoOutstandingRequests(callback);\n          } else if (!rootSelector) {\n            throw new Error(\n                'Could not automatically find injector on page: \"' +\n                window.location.toString() + '\".  Consider using config.rootEl');\n          } else {\n            throw new Error(\n                'root element (' + rootSelector + ') has no injector.' +\n                ' this may mean it is not inside ng-app.');\n          }\n        }\n      }\n      else {callback();}  // not an angular1 app\n    };\n\n    // Wait for Angular2 testability and then run test callback\n    var waitForAngular2 = function() {\n      if (window.getAngularTestability) {\n        if (rootSelector) {\n          var testability = null;\n          var el = document.querySelector(rootSelector);\n          try{\n            testability = window.getAngularTestability(el);\n          }\n          catch(e){}\n          if (testability) {\n            testability.whenStable(testCallback);\n            return;\n          }\n        }\n\n        // Didn't specify root element or testability could not be found\n        // by rootSelector. This may happen in a hybrid app, which could have\n        // more than one root.\n        var testabilities = window.getAllAngularTestabilities();\n        var count = testabilities.length;\n\n        // No angular2 testability, this happens when\n        // going to a hybrid page and going back to a pure angular1 page\n        if (count === 0) {\n          testCallback();\n          return;\n        }\n\n        var decrement = function() {\n          count--;\n          if (count === 0) {\n            testCallback();\n          }\n        };\n        testabilities.forEach(function(testability) {\n          testability.whenStable(decrement);\n        });\n\n      }\n      else {testCallback();}  // not an angular2 app\n    };\n\n    if (!(window.angular) && !(window.getAngularTestability)) {\n      // no testability hook\n      throw new Error(\n          'both angularJS testability and angular testability are undefined.' +\n          '  This could be either ' +\n          'because this is a non-angular page or because your test involves ' +\n          'client-side navigation, which can interfere with Protractor\\'s ' +\n          'bootstrapping.  See http://git.io/v4gXM for details');\n    } else {waitForAngular1(waitForAngular2);}  // Wait for angular1 and angular2\n                                                // Testability hooks sequentially\n\n  } catch (err) {\n    callback(err.message);\n  }\n\n};\n\n/**\n * Find a list of elements in the page by their angular binding.\n *\n * @param {string} binding The binding, e.g. {{cat.name}}.\n * @param {boolean} exactMatch Whether the binding needs to be matched exactly\n * @param {Element} using The scope of the search.\n * @param {string} rootSelector The selector to use for the root app element.\n *\n * @return {Array.<Element>} The elements containing the binding.\n */\nfunctions.findBindings = function(binding, exactMatch, using, rootSelector) {\n  using = using || document;\n  if (angular.getTestability) {\n    return getNg1Hooks(rootSelector).$$testability.\n        findBindings(using, binding, exactMatch);\n  }\n  var bindings = using.getElementsByClassName('ng-binding');\n  var matches = [];\n  for (var i = 0; i < bindings.length; ++i) {\n    var dataBinding = angular.element(bindings[i]).data('$binding');\n    if (dataBinding) {\n      var bindingName = dataBinding.exp || dataBinding[0].exp || dataBinding;\n      if (exactMatch) {\n        var matcher = new RegExp('({|\\\\s|^|\\\\|)' +\n            /* See http://stackoverflow.com/q/3561711 */\n            binding.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&') +\n            '(}|\\\\s|$|\\\\|)');\n        if (matcher.test(bindingName)) {\n          matches.push(bindings[i]);\n        }\n      } else {\n        if (bindingName.indexOf(binding) != -1) {\n          matches.push(bindings[i]);\n        }\n      }\n\n    }\n  }\n  return matches; /* Return the whole array for webdriver.findElements. */\n};\n\n/**\n * Find an array of elements matching a row within an ng-repeat.\n * Always returns an array of only one element for plain old ng-repeat.\n * Returns an array of all the elements in one segment for ng-repeat-start.\n *\n * @param {string} repeater The text of the repeater, e.g. 'cat in cats'.\n * @param {boolean} exact Whether the repeater needs to be matched exactly\n * @param {number} index The row index.\n * @param {Element} using The scope of the search.\n *\n * @return {Array.<Element>} The row of the repeater, or an array of elements\n *     in the first row in the case of ng-repeat-start.\n */\nfunction findRepeaterRows(repeater, exact, index, using) {\n  using = using || document;\n\n  var prefixes = ['ng-', 'ng_', 'data-ng-', 'x-ng-', 'ng\\\\:'];\n  var rows = [];\n  for (var p = 0; p < prefixes.length; ++p) {\n    var attr = prefixes[p] + 'repeat';\n    var repeatElems = using.querySelectorAll('[' + attr + ']');\n    attr = attr.replace(/\\\\/g, '');\n    for (var i = 0; i < repeatElems.length; ++i) {\n      if (repeaterMatch(repeatElems[i].getAttribute(attr), repeater, exact)) {\n        rows.push(repeatElems[i]);\n      }\n    }\n  }\n  /* multiRows is an array of arrays, where each inner array contains\n     one row of elements. */\n  var multiRows = [];\n  for (var p = 0; p < prefixes.length; ++p) {\n    var attr = prefixes[p] + 'repeat-start';\n    var repeatElems = using.querySelectorAll('[' + attr + ']');\n    attr = attr.replace(/\\\\/g, '');\n    for (var i = 0; i < repeatElems.length; ++i) {\n      if (repeaterMatch(repeatElems[i].getAttribute(attr), repeater, exact)) {\n        var elem = repeatElems[i];\n        var row = [];\n        while (elem.nodeType != 8 ||\n            !repeaterMatch(elem.nodeValue, repeater)) {\n          if (elem.nodeType == 1) {\n            row.push(elem);\n          }\n          elem = elem.nextSibling;\n        }\n        multiRows.push(row);\n      }\n    }\n  }\n  var row = rows[index] || [], multiRow = multiRows[index] || [];\n  return [].concat(row, multiRow);\n}\nfunctions.findRepeaterRows = wrapWithHelpers(findRepeaterRows, repeaterMatch);\n\n /**\n * Find all rows of an ng-repeat.\n *\n * @param {string} repeater The text of the repeater, e.g. 'cat in cats'.\n * @param {boolean} exact Whether the repeater needs to be matched exactly\n * @param {Element} using The scope of the search.\n *\n * @return {Array.<Element>} All rows of the repeater.\n */\nfunction findAllRepeaterRows(repeater, exact, using) {\n  using = using || document;\n\n  var rows = [];\n  var prefixes = ['ng-', 'ng_', 'data-ng-', 'x-ng-', 'ng\\\\:'];\n  for (var p = 0; p < prefixes.length; ++p) {\n    var attr = prefixes[p] + 'repeat';\n    var repeatElems = using.querySelectorAll('[' + attr + ']');\n    attr = attr.replace(/\\\\/g, '');\n    for (var i = 0; i < repeatElems.length; ++i) {\n      if (repeaterMatch(repeatElems[i].getAttribute(attr), repeater, exact)) {\n        rows.push(repeatElems[i]);\n      }\n    }\n  }\n  for (var p = 0; p < prefixes.length; ++p) {\n    var attr = prefixes[p] + 'repeat-start';\n    var repeatElems = using.querySelectorAll('[' + attr + ']');\n    attr = attr.replace(/\\\\/g, '');\n    for (var i = 0; i < repeatElems.length; ++i) {\n      if (repeaterMatch(repeatElems[i].getAttribute(attr), repeater, exact)) {\n        var elem = repeatElems[i];\n        while (elem.nodeType != 8 ||\n            !repeaterMatch(elem.nodeValue, repeater)) {\n          if (elem.nodeType == 1) {\n            rows.push(elem);\n          }\n          elem = elem.nextSibling;\n        }\n      }\n    }\n  }\n  return rows;\n}\nfunctions.findAllRepeaterRows = wrapWithHelpers(findAllRepeaterRows, repeaterMatch);\n\n/**\n * Find an element within an ng-repeat by its row and column.\n *\n * @param {string} repeater The text of the repeater, e.g. 'cat in cats'.\n * @param {boolean} exact Whether the repeater needs to be matched exactly\n * @param {number} index The row index.\n * @param {string} binding The column binding, e.g. '{{cat.name}}'.\n * @param {Element} using The scope of the search.\n * @param {string} rootSelector The selector to use for the root app element.\n *\n * @return {Array.<Element>} The element in an array.\n */\nfunction findRepeaterElement(repeater, exact, index, binding, using, rootSelector) {\n  var matches = [];\n  using = using || document;\n\n  var rows = [];\n  var prefixes = ['ng-', 'ng_', 'data-ng-', 'x-ng-', 'ng\\\\:'];\n  for (var p = 0; p < prefixes.length; ++p) {\n    var attr = prefixes[p] + 'repeat';\n    var repeatElems = using.querySelectorAll('[' + attr + ']');\n    attr = attr.replace(/\\\\/g, '');\n    for (var i = 0; i < repeatElems.length; ++i) {\n      if (repeaterMatch(repeatElems[i].getAttribute(attr), repeater, exact)) {\n        rows.push(repeatElems[i]);\n      }\n    }\n  }\n  /* multiRows is an array of arrays, where each inner array contains\n     one row of elements. */\n  var multiRows = [];\n  for (var p = 0; p < prefixes.length; ++p) {\n    var attr = prefixes[p] + 'repeat-start';\n    var repeatElems = using.querySelectorAll('[' + attr + ']');\n    attr = attr.replace(/\\\\/g, '');\n    for (var i = 0; i < repeatElems.length; ++i) {\n      if (repeaterMatch(repeatElems[i].getAttribute(attr), repeater, exact)) {\n        var elem = repeatElems[i];\n        var row = [];\n        while (elem.nodeType != 8 || (elem.nodeValue &&\n            !repeaterMatch(elem.nodeValue, repeater))) {\n          if (elem.nodeType == 1) {\n            row.push(elem);\n          }\n          elem = elem.nextSibling;\n        }\n        multiRows.push(row);\n      }\n    }\n  }\n  var row = rows[index];\n  var multiRow = multiRows[index];\n  var bindings = [];\n  if (row) {\n    if (angular.getTestability) {\n      matches.push.apply(\n          matches,\n          getNg1Hooks(rootSelector).$$testability.findBindings(row, binding));\n    } else {\n      if (row.className.indexOf('ng-binding') != -1) {\n        bindings.push(row);\n      }\n      var childBindings = row.getElementsByClassName('ng-binding');\n      for (var i = 0; i < childBindings.length; ++i) {\n        bindings.push(childBindings[i]);\n      }\n    }\n  }\n  if (multiRow) {\n    for (var i = 0; i < multiRow.length; ++i) {\n      var rowElem = multiRow[i];\n      if (angular.getTestability) {\n        matches.push.apply(\n            matches,\n            getNg1Hooks(rootSelector).$$testability.findBindings(rowElem,\n                binding));\n      } else {\n        if (rowElem.className.indexOf('ng-binding') != -1) {\n          bindings.push(rowElem);\n        }\n        var childBindings = rowElem.getElementsByClassName('ng-binding');\n        for (var j = 0; j < childBindings.length; ++j) {\n          bindings.push(childBindings[j]);\n        }\n      }\n    }\n  }\n  for (var i = 0; i < bindings.length; ++i) {\n    var dataBinding = angular.element(bindings[i]).data('$binding');\n    if (dataBinding) {\n      var bindingName = dataBinding.exp || dataBinding[0].exp || dataBinding;\n      if (bindingName.indexOf(binding) != -1) {\n        matches.push(bindings[i]);\n      }\n    }\n  }\n  return matches;\n}\nfunctions.findRepeaterElement =\n    wrapWithHelpers(findRepeaterElement, repeaterMatch, getNg1Hooks);\n\n/**\n * Find the elements in a column of an ng-repeat.\n *\n * @param {string} repeater The text of the repeater, e.g. 'cat in cats'.\n * @param {boolean} exact Whether the repeater needs to be matched exactly\n * @param {string} binding The column binding, e.g. '{{cat.name}}'.\n * @param {Element} using The scope of the search.\n * @param {string} rootSelector The selector to use for the root app element.\n *\n * @return {Array.<Element>} The elements in the column.\n */\nfunction findRepeaterColumn(repeater, exact, binding, using, rootSelector) {\n  var matches = [];\n  using = using || document;\n\n  var rows = [];\n  var prefixes = ['ng-', 'ng_', 'data-ng-', 'x-ng-', 'ng\\\\:'];\n  for (var p = 0; p < prefixes.length; ++p) {\n    var attr = prefixes[p] + 'repeat';\n    var repeatElems = using.querySelectorAll('[' + attr + ']');\n    attr = attr.replace(/\\\\/g, '');\n    for (var i = 0; i < repeatElems.length; ++i) {\n      if (repeaterMatch(repeatElems[i].getAttribute(attr), repeater, exact)) {\n        rows.push(repeatElems[i]);\n      }\n    }\n  }\n  /* multiRows is an array of arrays, where each inner array contains\n     one row of elements. */\n  var multiRows = [];\n  for (var p = 0; p < prefixes.length; ++p) {\n    var attr = prefixes[p] + 'repeat-start';\n    var repeatElems = using.querySelectorAll('[' + attr + ']');\n    attr = attr.replace(/\\\\/g, '');\n    for (var i = 0; i < repeatElems.length; ++i) {\n      if (repeaterMatch(repeatElems[i].getAttribute(attr), repeater, exact)) {\n        var elem = repeatElems[i];\n        var row = [];\n        while (elem.nodeType != 8 || (elem.nodeValue &&\n            !repeaterMatch(elem.nodeValue, repeater))) {\n          if (elem.nodeType == 1) {\n            row.push(elem);\n          }\n          elem = elem.nextSibling;\n        }\n        multiRows.push(row);\n      }\n    }\n  }\n  var bindings = [];\n  for (var i = 0; i < rows.length; ++i) {\n    if (angular.getTestability) {\n      matches.push.apply(\n          matches,\n          getNg1Hooks(rootSelector).$$testability.findBindings(rows[i],\n              binding));\n    } else {\n      if (rows[i].className.indexOf('ng-binding') != -1) {\n        bindings.push(rows[i]);\n      }\n      var childBindings = rows[i].getElementsByClassName('ng-binding');\n      for (var k = 0; k < childBindings.length; ++k) {\n        bindings.push(childBindings[k]);\n      }\n    }\n  }\n  for (var i = 0; i < multiRows.length; ++i) {\n    for (var j = 0; j < multiRows[i].length; ++j) {\n      if (angular.getTestability) {\n        matches.push.apply(\n            matches,\n            getNg1Hooks(rootSelector).$$testability.findBindings(\n                multiRows[i][j], binding));\n      } else {\n        var elem = multiRows[i][j];\n        if (elem.className.indexOf('ng-binding') != -1) {\n          bindings.push(elem);\n        }\n        var childBindings = elem.getElementsByClassName('ng-binding');\n        for (var k = 0; k < childBindings.length; ++k) {\n          bindings.push(childBindings[k]);\n        }\n      }\n    }\n  }\n  for (var j = 0; j < bindings.length; ++j) {\n    var dataBinding = angular.element(bindings[j]).data('$binding');\n    if (dataBinding) {\n      var bindingName = dataBinding.exp || dataBinding[0].exp || dataBinding;\n      if (bindingName.indexOf(binding) != -1) {\n        matches.push(bindings[j]);\n      }\n    }\n  }\n  return matches;\n}\nfunctions.findRepeaterColumn =\n    wrapWithHelpers(findRepeaterColumn, repeaterMatch, getNg1Hooks);\n\n/**\n * Find elements by model name.\n *\n * @param {string} model The model name.\n * @param {Element} using The scope of the search.\n * @param {string} rootSelector The selector to use for the root app element.\n *\n * @return {Array.<Element>} The matching elements.\n */\nfunctions.findByModel = function(model, using, rootSelector) {\n  using = using || document;\n\n  if (angular.getTestability) {\n    return getNg1Hooks(rootSelector).$$testability.\n        findModels(using, model, true);\n  }\n  var prefixes = ['ng-', 'ng_', 'data-ng-', 'x-ng-', 'ng\\\\:'];\n  for (var p = 0; p < prefixes.length; ++p) {\n    var selector = '[' + prefixes[p] + 'model=\"' + model + '\"]';\n    var elements = using.querySelectorAll(selector);\n    if (elements.length) {\n      return elements;\n    }\n  }\n};\n\n/**\n * Find elements by options.\n *\n * @param {string} optionsDescriptor The descriptor for the option\n *     (i.e. fruit for fruit in fruits).\n * @param {Element} using The scope of the search.\n *\n * @return {Array.<Element>} The matching elements.\n */\nfunctions.findByOptions = function(optionsDescriptor, using) {\n  using = using || document;\n\n  var prefixes = ['ng-', 'ng_', 'data-ng-', 'x-ng-', 'ng\\\\:'];\n  for (var p = 0; p < prefixes.length; ++p) {\n    var selector = '[' + prefixes[p] + 'options=\"' + optionsDescriptor + '\"] option';\n    var elements = using.querySelectorAll(selector);\n    if (elements.length) {\n      return elements;\n    }\n  }\n};\n\n/**\n * Find buttons by textual content.\n *\n * @param {string} searchText The exact text to match.\n * @param {Element} using The scope of the search.\n *\n * @return {Array.<Element>} The matching elements.\n */\nfunctions.findByButtonText = function(searchText, using) {\n  using = using || document;\n\n  var elements = using.querySelectorAll('button, input[type=\"button\"], input[type=\"submit\"]');\n  var matches = [];\n  for (var i = 0; i < elements.length; ++i) {\n    var element = elements[i];\n    var elementText;\n    if (element.tagName.toLowerCase() == 'button') {\n      elementText = element.textContent || element.innerText || '';\n    } else {\n      elementText = element.value;\n    }\n    if (elementText.trim() === searchText) {\n      matches.push(element);\n    }\n  }\n\n  return matches;\n};\n\n/**\n * Find buttons by textual content.\n *\n * @param {string} searchText The exact text to match.\n * @param {Element} using The scope of the search.\n *\n * @return {Array.<Element>} The matching elements.\n */\nfunctions.findByPartialButtonText = function(searchText, using) {\n  using = using || document;\n\n  var elements = using.querySelectorAll('button, input[type=\"button\"], input[type=\"submit\"]');\n  var matches = [];\n  for (var i = 0; i < elements.length; ++i) {\n    var element = elements[i];\n    var elementText;\n    if (element.tagName.toLowerCase() == 'button') {\n      elementText = element.textContent || element.innerText || '';\n    } else {\n      elementText = element.value;\n    }\n    if (elementText.indexOf(searchText) > -1) {\n      matches.push(element);\n    }\n  }\n\n  return matches;\n};\n\n/**\n * Find elements by css selector and textual content.\n *\n * @param {string} cssSelector The css selector to match.\n * @param {string} searchText The exact text to match or a serialized regex.\n * @param {Element} using The scope of the search.\n *\n * @return {Array.<Element>} An array of matching elements.\n */\nfunctions.findByCssContainingText = function(cssSelector, searchText, using) {\n  using = using || document;\n\n  if (searchText.indexOf('__REGEXP__') === 0) {\n    var match = searchText.split('__REGEXP__')[1].match(/\\/(.*)\\/(.*)?/);\n    searchText = new RegExp(match[1], match[2] || '');\n  }\n  var elements = using.querySelectorAll(cssSelector);\n  var matches = [];\n  for (var i = 0; i < elements.length; ++i) {\n    var element = elements[i];\n    var elementText = element.textContent || element.innerText || '';\n    var elementMatches = searchText instanceof RegExp ?\n        searchText.test(elementText) :\n        elementText.indexOf(searchText) > -1;\n\n    if (elementMatches) {\n      matches.push(element);\n    }\n  }\n  return matches;\n};\n\n/**\n * Tests whether the angular global variable is present on a page. Retries\n * in case the page is just loading slowly.\n *\n * Asynchronous.\n *\n * @param {number} attempts Number of times to retry.\n * @param {boolean} ng12Hybrid Flag set if app is a hybrid of angular 1 and 2\n * @param {function({version: ?number, message: ?string})} asyncCallback callback\n *\n */\nfunctions.testForAngular = function(attempts, ng12Hybrid, asyncCallback) {\n  var callback = function(args) {\n    setTimeout(function() {\n      asyncCallback(args);\n    }, 0);\n  };\n  var definitelyNg1 = !!ng12Hybrid;\n  var definitelyNg2OrNewer = false;\n  var check = function(n) {\n    try {\n      /* Figure out which version of angular we're waiting on */\n      if (!definitelyNg1 && !definitelyNg2OrNewer) {\n        if (window.angular && !(window.angular.version && window.angular.version.major > 1)) {\n          definitelyNg1 = true;\n        } else if (window.getAllAngularTestabilities) {\n          definitelyNg2OrNewer = true;\n        }\n      }\n      /* See if our version of angular is ready */\n      if (definitelyNg1) {\n        if (window.angular && window.angular.resumeBootstrap) {\n          return callback({ver: 1});\n        }\n      } else if (definitelyNg2OrNewer) {\n        if (true /* ng2 has no resumeBootstrap() */) {\n          return callback({ver: 2});\n        }\n      }\n      /* Try again (or fail) */\n      if (n < 1) {\n        if (definitelyNg1 && window.angular) {\n          callback({message: 'angular never provided resumeBootstrap'});\n        } else if (ng12Hybrid && !window.angular) {\n          callback({message: 'angular 1 never loaded' +\n              window.getAllAngularTestabilities ? ' (are you sure this app ' +\n              'uses ngUpgrade?  Try un-setting ng12Hybrid)' : ''});\n        } else {\n          callback({message: 'retries looking for angular exceeded'});\n        }\n      } else {\n        window.setTimeout(function() {check(n - 1);}, 1000);\n      }\n    } catch (e) {\n      callback({message: e});\n    }\n  };\n  check(attempts);\n};\n\n/**\n * Evalute an Angular expression in the context of a given element.\n *\n * @param {Element} element The element in whose scope to evaluate.\n * @param {string} expression The expression to evaluate.\n *\n * @return {?Object} The result of the evaluation.\n */\nfunctions.evaluate = function(element, expression) {\n  return angular.element(element).scope().$eval(expression);\n};\n\nfunctions.allowAnimations = function(element, value) {\n  var ngElement = angular.element(element);\n  if (ngElement.allowAnimations) {\n    // AngularDart: $testability API.\n    return ngElement.allowAnimations(value);\n  } else {\n    // AngularJS\n    var enabledFn = ngElement.injector().get('$animate').enabled;\n    return (value == null) ? enabledFn() : enabledFn(value);\n  }\n};\n\n/**\n * Return the current url using $location.absUrl().\n *\n * @param {string} selector The selector housing an ng-app\n */\nfunctions.getLocationAbsUrl = function(selector) {\n  var hooks = getNg1Hooks(selector);\n  if (angular.getTestability) {\n    return hooks.$$testability.getLocation();\n  }\n  return hooks.$injector.get('$location').absUrl();\n};\n\n/**\n * Browse to another page using in-page navigation.\n *\n * @param {string} selector The selector housing an ng-app\n * @param {string} url In page URL using the same syntax as $location.url(),\n *     /path?search=a&b=c#hash\n */\nfunctions.setLocation = function(selector, url) {\n  var hooks = getNg1Hooks(selector);\n  if (angular.getTestability) {\n    return hooks.$$testability.setLocation(url);\n  }\n  var $injector = hooks.$injector;\n  var $location = $injector.get('$location');\n  var $rootScope = $injector.get('$rootScope');\n\n  if (url !== $location.url()) {\n    $location.url(url);\n    $rootScope.$digest();\n  }\n};\n\n/**\n * Retrieve the pending $http requests.\n *\n * @param {string} selector The selector housing an ng-app\n * @return {!Array<!Object>} An array of pending http requests.\n */\nfunctions.getPendingHttpRequests = function(selector) {\n  var hooks = getNg1Hooks(selector, true);\n  var $http = hooks.$injector.get('$http');\n  return $http.pendingRequests;\n};\n\n['waitForAngular', 'findBindings', 'findByModel', 'getLocationAbsUrl',\n  'setLocation', 'getPendingHttpRequests'].forEach(function(funName) {\n    functions[funName] = wrapWithHelpers(functions[funName], getNg1Hooks);\n});\n\n/* Publish all the functions as strings to pass to WebDriver's\n * exec[Async]Script.  In addition, also include a script that will\n * install all the functions on window (for debugging.)\n *\n * We also wrap any exceptions thrown by a clientSideScripts function\n * that is not an instance of the Error type into an Error type.  If we\n * don't do so, then the resulting stack trace is completely unhelpful\n * and the exception message is just \"unknown error.\"  These types of\n * exceptions are the common case for dart2js code.  This wrapping gives\n * us the Dart stack trace and exception message.\n */\nvar util = require('util');\nvar scriptsList = [];\nvar scriptFmt = (\n    'try { return (%s).apply(this, arguments); }\\n' +\n    'catch(e) { throw (e instanceof Error) ? e : new Error(e); }');\nfor (var fnName in functions) {\n  if (functions.hasOwnProperty(fnName)) {\n    exports[fnName] = util.format(scriptFmt, functions[fnName]);\n    scriptsList.push(util.format('%s: %s', fnName, functions[fnName]));\n  }\n}\n\nexports.installInBrowser = (util.format(\n    'window.clientSideScripts = {%s};', scriptsList.join(', ')));\n\n/**\n * Automatically installed by Protractor when a page is loaded, this\n * default mock module decorates $timeout to keep track of any\n * outstanding timeouts.\n *\n * @param {boolean} trackOutstandingTimeouts\n */\nexports.protractorBaseModuleFn = function(trackOutstandingTimeouts) {\n  var ngMod = angular.module('protractorBaseModule_', []).config([\n    '$compileProvider',\n    function($compileProvider) {\n      if ($compileProvider.debugInfoEnabled) {\n        $compileProvider.debugInfoEnabled(true);\n      }\n    }\n  ]);\n  if (trackOutstandingTimeouts) {\n    ngMod.config([\n      '$provide',\n      function ($provide) {\n        $provide.decorator('$timeout', [\n          '$delegate',\n          function ($delegate) {\n            var $timeout = $delegate;\n\n            var taskId = 0;\n\n            if (!window['NG_PENDING_TIMEOUTS']) {\n              window['NG_PENDING_TIMEOUTS'] = {};\n            }\n\n            var extendedTimeout= function() {\n              var args = Array.prototype.slice.call(arguments);\n              if (typeof(args[0]) !== 'function') {\n                return $timeout.apply(null, args);\n              }\n\n              taskId++;\n              var fn = args[0];\n              window['NG_PENDING_TIMEOUTS'][taskId] =\n                  fn.toString();\n              var wrappedFn = (function(taskId_) {\n                return function() {\n                  delete window['NG_PENDING_TIMEOUTS'][taskId_];\n                  return fn.apply(null, arguments);\n                };\n              })(taskId);\n              args[0] = wrappedFn;\n\n              var promise = $timeout.apply(null, args);\n              promise.ptorTaskId_ = taskId;\n              return promise;\n            };\n\n            extendedTimeout.cancel = function() {\n              var taskId_ = arguments[0] && arguments[0].ptorTaskId_;\n              if (taskId_) {\n                delete window['NG_PENDING_TIMEOUTS'][taskId_];\n              }\n              return $timeout.cancel.apply($timeout, arguments);\n            };\n\n            return extendedTimeout;\n          }\n        ]);\n      }\n    ]);\n  }\n};\n"]},"metadata":{},"sourceType":"script"}